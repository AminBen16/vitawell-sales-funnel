<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VitaBlog - Premium Wellness Products & Opportunities</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .gradient-text { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .btn-primary:hover { opacity: 0.9; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <span class="text-3xl">üåø</span>
                <h1 class="text-2xl font-bold gradient-text">VitaBlog</h1>
            </div>
            <div class="flex space-x-4">
                <button id="nav-products" class="nav-link px-4 py-2 rounded hover:bg-gray-100">Products</button>
                <button id="nav-opportunities" class="nav-link px-4 py-2 rounded hover:bg-gray-100">Opportunities</button>
                <button id="nav-account" class="nav-link px-4 py-2 rounded hover:bg-gray-100">Account</button>
                <button id="logout-btn" class="px-4 py-2 rounded bg-red-500 text-white hidden">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Hero Section -->
        <section id="hero" class="mb-12">
            <div class="bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg p-12 text-white text-center mb-8">
                <h2 class="text-4xl font-bold mb-4">Welcome to VitaBlog</h2>
                <p class="text-xl mb-6">Discover premium wellness products and income opportunities</p>
                <div id="hero-buttons" class="flex justify-center space-x-4">
                    <button id="btn-register-hero" class="btn-primary text-white px-6 py-3 rounded-lg font-bold">
                        Get Started
                    </button>
                    <button id="btn-login-hero" class="bg-white text-purple-600 px-6 py-3 rounded-lg font-bold">
                        Sign In
                    </button>
                </div>
            </div>
        </section>

        <!-- Auth Forms (Hidden by default) -->
        <section id="auth-section" class="hidden mb-12">
            <!-- Register Form -->
            <div id="register-form-container" class="bg-white rounded-lg shadow-lg p-8 max-w-md mx-auto mb-8">
                <h3 class="text-2xl font-bold mb-6">Create Account</h3>
                <form id="registerForm" class="space-y-4">
                    <input type="text" id="reg-firstName" placeholder="First Name" class="w-full border rounded px-4 py-2" required>
                    <input type="text" id="reg-lastName" placeholder="Last Name" class="w-full border rounded px-4 py-2" required>
                    <input type="email" id="reg-email" placeholder="Email" class="w-full border rounded px-4 py-2" required>
                    <input type="password" id="reg-password" placeholder="Password (min 6 chars)" class="w-full border rounded px-4 py-2" required>
                    <button type="submit" class="btn-primary text-white w-full py-2 rounded font-bold">Register</button>
                    <button type="button" id="toggle-login" class="w-full text-purple-600 py-2">Already have an account? Sign In</button>
                </form>
            </div>

            <!-- Login Form -->
            <div id="login-form-container" class="hidden bg-white rounded-lg shadow-lg p-8 max-w-md mx-auto">
                <h3 class="text-2xl font-bold mb-6">Sign In</h3>
                <form id="loginForm" class="space-y-4">
                    <input type="email" id="login-email" placeholder="Email" class="w-full border rounded px-4 py-2" required>
                    <input type="password" id="login-password" placeholder="Password" class="w-full border rounded px-4 py-2" required>
                    <button type="submit" class="btn-primary text-white w-full py-2 rounded font-bold">Sign In</button>
                    <button type="button" id="toggle-register" class="w-full text-purple-600 py-2">New here? Create Account</button>
                </form>
            </div>
        </section>

        <!-- Products Section -->
        <section id="products-section" class="mb-12">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">Featured Products</h2>
                <button id="btn-add-product" class="btn-primary text-white px-4 py-2 rounded hidden">+ Add Product</button>
            </div>
            <div id="products-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white rounded-lg shadow p-6 card-hover">
                    <div class="text-4xl mb-4">üíä</div>
                    <h3 class="text-xl font-bold mb-2">Premium Formula</h3>
                    <p class="text-gray-600 mb-4">Advanced wellness formula with natural ingredients</p>
                    <p class="text-2xl font-bold text-purple-600 mb-4">$49.99</p>
                    <button class="w-full bg-purple-600 text-white py-2 rounded">Learn More</button>
                </div>
                <div class="bg-white rounded-lg shadow p-6 card-hover">
                    <div class="text-4xl mb-4">üß¥</div>
                    <h3 class="text-xl font-bold mb-2">Skincare Line</h3>
                    <p class="text-gray-600 mb-4">Organic skincare products for all skin types</p>
                    <p class="text-2xl font-bold text-purple-600 mb-4">$39.99</p>
                    <button class="w-full bg-purple-600 text-white py-2 rounded">Learn More</button>
                </div>
                <div class="bg-white rounded-lg shadow p-6 card-hover">
                    <div class="text-4xl mb-4">üåø</div>
                    <h3 class="text-xl font-bold mb-2">Supplement Bundle</h3>
                    <p class="text-gray-600 mb-4">Complete health support with multi-vitamins</p>
                    <p class="text-2xl font-bold text-purple-600 mb-4">$79.99</p>
                    <button class="w-full bg-purple-600 text-white py-2 rounded">Learn More</button>
                </div>
            </div>
        </section>

        <!-- Opportunities Section -->
        <section id="opportunities-section" class="mb-12">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">Income Opportunities</h2>
                <button id="btn-add-opportunity" class="btn-primary text-white px-4 py-2 rounded hidden">+ Add Opportunity</button>
            </div>
            <div id="opportunities-container" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white rounded-lg shadow p-6 card-hover border-l-4 border-yellow-500">
                    <h3 class="text-xl font-bold mb-2">ü§ù Affiliate Program</h3>
                    <p class="text-gray-600 mb-4">Earn 20% commission on every sale you refer</p>
                    <div class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded inline-block mb-4">20% Commission</div>
                    <button class="w-full bg-yellow-500 text-white py-2 rounded">Join Now</button>
                </div>
                <div class="bg-white rounded-lg shadow p-6 card-hover border-l-4 border-green-500">
                    <h3 class="text-xl font-bold mb-2">üíº Distributorship</h3>
                    <p class="text-gray-600 mb-4">Become a regional distributor with exclusive territory</p>
                    <div class="bg-green-100 text-green-800 px-3 py-1 rounded inline-block mb-4">High Margin</div>
                    <button class="w-full bg-green-500 text-white py-2 rounded">Learn More</button>
                </div>
            </div>
        </section>

        <!-- User Profile Section -->
        <section id="profile-section" class="hidden">
            <div class="bg-white rounded-lg shadow-lg p-8 max-w-2xl mx-auto">
                <h2 class="text-3xl font-bold mb-6">My Profile</h2>
                <div id="profile-info" class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-600 font-semibold">First Name</label>
                            <p id="profile-firstName" class="text-lg">-</p>
                        </div>
                        <div>
                            <label class="block text-gray-600 font-semibold">Last Name</label>
                            <p id="profile-lastName" class="text-lg">-</p>
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-600 font-semibold">Email</label>
                        <p id="profile-email" class="text-lg">-</p>
                    </div>
                    <div>
                        <label class="block text-gray-600 font-semibold">Role</label>
                        <p id="profile-role" class="text-lg px-3 py-1 bg-purple-100 text-purple-800 rounded inline-block">-</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white mt-16 py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p>&copy; 2025 VitaBlog. All rights reserved.</p>
            <p class="text-gray-400 mt-2">Wellness Products & Income Opportunities</p>
        </div>
    </footer>

    <script>
        const API_URL = '/api/vitablog';
        let currentUser = null;
        let authToken = null;

        // DOM Elements
        const navButtons = {
            products: document.getElementById('nav-products'),
            opportunities: document.getElementById('nav-opportunities'),
            account: document.getElementById('nav-account'),
            logout: document.getElementById('logout-btn')
        };

        const sections = {
            hero: document.getElementById('hero'),
            auth: document.getElementById('auth-section'),
            products: document.getElementById('products-section'),
            opportunities: document.getElementById('opportunities-section'),
            profile: document.getElementById('profile-section')
        };

        const forms = {
            register: document.getElementById('registerForm'),
            login: document.getElementById('loginForm')
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            checkAuthStatus();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Auth toggle
            document.getElementById('toggle-login').addEventListener('click', toggleForms);
            document.getElementById('toggle-register').addEventListener('click', toggleForms);

            // Hero buttons
            document.getElementById('btn-register-hero').addEventListener('click', () => {
                showAuthSection('register');
            });
            document.getElementById('btn-login-hero').addEventListener('click', () => {
                showAuthSection('login');
            });

            // Forms
            forms.register.addEventListener('submit', handleRegister);
            forms.login.addEventListener('submit', handleLogin);

            // Nav buttons
            navButtons.products.addEventListener('click', () => showSection('products'));
            navButtons.opportunities.addEventListener('click', () => showSection('opportunities'));
            navButtons.account.addEventListener('click', () => showSection('profile'));
            navButtons.logout.addEventListener('click', handleLogout);
        }

        function toggleForms() {
            document.getElementById('register-form-container').classList.toggle('hidden');
            document.getElementById('login-form-container').classList.toggle('hidden');
        }

        function showAuthSection(form) {
            sections.hero.classList.add('hidden');
            sections.auth.classList.remove('hidden');
            
            if (form === 'register') {
                document.getElementById('register-form-container').classList.remove('hidden');
                document.getElementById('login-form-container').classList.add('hidden');
            } else {
                document.getElementById('register-form-container').classList.add('hidden');
                document.getElementById('login-form-container').classList.remove('hidden');
            }
        }

        function showSection(section) {
            Object.values(sections).forEach(s => s.classList.add('hidden'));
            if (sections[section]) sections[section].classList.remove('hidden');
        }

        async function handleRegister(e) {
            e.preventDefault();
            const data = {
                firstName: document.getElementById('reg-firstName').value,
                lastName: document.getElementById('reg-lastName').value,
                email: document.getElementById('reg-email').value,
                password: document.getElementById('reg-password').value
            };

            try {
                const response = await fetch(`${API_URL}/auth/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                
                if (response.ok) {
                    authToken = result.token;
                    currentUser = result.user;
                    localStorage.setItem('authToken', authToken);
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    alert('‚úÖ Registration successful!');
                    loadDashboard();
                } else {
                    alert('‚ùå ' + result.error);
                }
            } catch (error) {
                alert('‚ùå Registration failed: ' + error.message);
            }
        }

        async function handleLogin(e) {
            e.preventDefault();
            const data = {
                email: document.getElementById('login-email').value,
                password: document.getElementById('login-password').value
            };

            try {
                const response = await fetch(`${API_URL}/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                
                if (response.ok) {
                    authToken = result.token;
                    currentUser = result.user;
                    localStorage.setItem('authToken', authToken);
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    alert('‚úÖ Login successful!');
                    loadDashboard();
                } else {
                    alert('‚ùå ' + result.error);
                }
            } catch (error) {
                alert('‚ùå Login failed: ' + error.message);
            }
        }

        function handleLogout() {
            authToken = null;
            currentUser = null;
            localStorage.removeItem('authToken');
            localStorage.removeItem('currentUser');
            checkAuthStatus();
            alert('‚úÖ Logged out');
        }

        function checkAuthStatus() {
            const token = localStorage.getItem('authToken');
            const user = localStorage.getItem('currentUser');

            if (token && user) {
                authToken = token;
                currentUser = JSON.parse(user);
                loadDashboard();
            } else {
                showAuthOptions();
            }
        }

        function showAuthOptions() {
            sections.hero.classList.remove('hidden');
            sections.auth.classList.add('hidden');
            sections.profile.classList.add('hidden');
            sections.products.classList.remove('hidden');
            sections.opportunities.classList.remove('hidden');
            navButtons.logout.classList.add('hidden');
            document.getElementById('btn-add-product').classList.add('hidden');
            document.getElementById('btn-add-opportunity').classList.add('hidden');
        }

        function loadDashboard() {
            sections.hero.classList.add('hidden');
            sections.auth.classList.add('hidden');
            sections.products.classList.remove('hidden');
            sections.opportunities.classList.remove('hidden');
            navButtons.logout.classList.remove('hidden');

            if (currentUser.role === 'author') {
                document.getElementById('btn-add-product').classList.remove('hidden');
                document.getElementById('btn-add-opportunity').classList.remove('hidden');
            }

            loadProducts();
            loadOpportunities();
            loadProfile();
        }

        async function loadProducts() {
            try {
                const response = await fetch(`${API_URL}/products`);
                const products = await response.json();
                const container = document.getElementById('products-container');
                
                if (products.length === 0) {
                    container.innerHTML = '<p class="col-span-3 text-center text-gray-500">No products yet</p>';
                } else {
                    container.innerHTML = products.map(p => `
                        <div class="bg-white rounded-lg shadow p-6 card-hover">
                            <h3 class="text-xl font-bold mb-2">${p.title}</h3>
                            <p class="text-gray-600 mb-4">${p.description}</p>
                            <p class="text-2xl font-bold text-purple-600 mb-4">$${p.price}</p>
                            <button class="w-full bg-purple-600 text-white py-2 rounded">Learn More</button>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Error loading products:', error);
            }
        }

        async function loadOpportunities() {
            try {
                const response = await fetch(`${API_URL}/opportunities`);
                const opportunities = await response.json();
                const container = document.getElementById('opportunities-container');
                
                if (opportunities.length === 0) {
                    container.innerHTML = '<p class="col-span-2 text-center text-gray-500">No opportunities yet</p>';
                } else {
                    container.innerHTML = opportunities.map(o => `
                        <div class="bg-white rounded-lg shadow p-6 card-hover border-l-4 border-yellow-500">
                            <h3 class="text-xl font-bold mb-2">${o.title}</h3>
                            <p class="text-gray-600 mb-4">${o.description}</p>
                            <div class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded inline-block mb-4">${o.commission}</div>
                            <button class="w-full bg-yellow-500 text-white py-2 rounded">Learn More</button>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Error loading opportunities:', error);
            }
        }

        function loadProfile() {
            if (currentUser) {
                document.getElementById('profile-firstName').textContent = currentUser.firstName;
                document.getElementById('profile-lastName').textContent = currentUser.lastName;
                document.getElementById('profile-email').textContent = currentUser.email;
                document.getElementById('profile-role').textContent = currentUser.role.toUpperCase();
            }
        }
    </script>
</body>
</html>
